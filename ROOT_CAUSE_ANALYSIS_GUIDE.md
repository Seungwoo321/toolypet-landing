# 코드 기반 문제 원인 분석 가이드 (ROOT_CAUSE_ANALYSIS_GUIDE.md)

## 개요

소프트웨어 문제의 근본 원인을 코드와 로직 분석을 통해 체계적으로 파악하는 방법론

## 핵심 원칙

- **코드는 진실이다**: 모든 현상은 코드의 동작 결과
- **추측 금지**: 실제 코드 흐름과 로직만을 근거로 분석
- **시각화 우선**: 복잡한 흐름은 다이어그램으로 표현
- **증거 기반**: 모든 주장은 코드 라인과 함께 제시
- **독립적 검증**: 사용자의 가설을 코드로 검증하여 사실 여부 확인
- **기술적 정확성**: 프로그래밍 원리에 입각한 논리적 분석

## 분석 프로세스

### 1단계: 문제 정의

- 사용자가 보고한 증상 정확히 파악
- 예상 동작 vs 실제 동작 명확히 구분
- 문제 발생 조건 및 시나리오 확인
- 사용자의 가설이 있다면 별도로 기록 (검증 대상)

### 2단계: 코드 흐름 추적

```
[진입점] → [컴포넌트/함수] → [상태 변경] → [부수 효과] → [결과]
```

- 데이터 흐름도 작성
- 함수 호출 체인 추적
- 상태 변경 시퀀스 다이어그램 작성

### 3단계: 핵심 코드 분석

- **의존성 관계 파악**
  - 컴포넌트 간 props 전달
  - 콜백 함수 체인
  - 상태 관리 플로우

- **트리거 포인트 식별**
  - 렌더링 트리거 조건
  - 상태 업데이트 트리거
  - 부수 효과 실행 조건

- **가설 검증**
  - 사용자가 제시한 원인 가설을 코드로 검증
  - 기술적으로 불가능한 시나리오 배제
  - 실제 가능한 시나리오만 추적

### 4단계: 문제 패턴 식별

- **순환 참조**: A → B → C → A
- **캐스케이딩 업데이트**: 연쇄적 상태 변경
- **레이스 컨디션**: 비동기 처리 충돌
- **메모리 누수**: 정리되지 않은 리소스

### 5단계: 근본 원인 도출

- 문제를 일으키는 정확한 코드 라인 특정
- 해당 코드가 문제를 일으키는 메커니즘 설명
- 시각적 플로우차트로 인과관계 표현
- 사용자의 가설과 실제 원인 비교
- 차이가 있다면 기술적 근거와 함께 설명

## 보고서 작성 지침

### 구조

1. **문제 요약**
   - 한 문장으로 핵심 문제 정의

2. **코드 실행 흐름**
   - 시각적 다이어그램 필수
   - 각 단계별 코드 위치 명시

3. **문제 발생 메커니즘**
   - 정상 동작 시나리오
   - 문제 발생 시나리오
   - 차이점 분석
   - 증상과 원인의 인과관계 명확화

4. **가설 검증 결과**
   - 사용자 가설의 기술적 타당성 검토
   - 코드 실행 관점에서 가능/불가능 판단
   - 실제 동작과의 일치/불일치 여부

5. **근본 원인**
   - 문제 코드 위치 (파일명:라인번호)
   - 왜 해당 코드가 문제인지 설명
   - 코드 스니펫 포함
   - 프로그래밍 원리에 기반한 설명

6. **증거 제시**
   - 분석 과정에서 확인한 코드 동작
   - 객체 참조, 함수 호출 등 구체적 증거
   - 기술적으로 검증 가능한 사실만 포함

### 시각화 요소

- 플로우차트: 실행 흐름
- 시퀀스 다이어그램: 시간 순서 상호작용
- 상태 다이어그램: 상태 변화 추적
- 의존성 그래프: 컴포넌트/모듈 관계

## 주의사항

- 로그 의존 금지: 코드 자체에서 답을 찾기
- 가정 배제: "아마도", "것 같다" 표현 금지
- 완전성: 문제 재현 경로 완벽히 추적
- 정확성: 코드 라인 번호와 함수명 정확히 명시
- 객관성 유지: 사용자 주장에 영향받지 않고 코드 사실에 기반
- 기술적 논리: 프로그래밍 언어와 프레임워크의 동작 원리에 충실
- 증상과 원인 구분: 로그나 에러는 증상이며, 코드가 원인임을 명확히 구분
